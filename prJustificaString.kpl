<?xml version="1.0" encoding="UTF-8"?><pag xmlns="www.kepler.com.mx/2003/KSchema" roles="" tit="Hola">	<grp dim="1,-1,10,20" brdr="2,1" clr="0,0,0" bclr="213,210,210">		<br/><sp/><txt>Texto Original</txt><br/><tab/>		<inp id="texto" dim="100,30" brdr="2,1" bclr="255,255,255" type="string" OnChange="ejecuta()"/><br/><br/><txt>Texto dividido</txt><br/><tab/>		<inp id="justificado" dim="100,30" brdr="2,1" bclr="255,255,255" type="string"/><br/>		<br/>	</grp>	<script>		InstallDriver("KDB75");		class Main {			var frn,kdb;			fun Main() {				frn=new FRNT;				kdb=new KDB;				kdb.connect();			}			fun ejecuta(){				var just=divideString(frn.get("texto"),80);				//frn.set("xmlData",just);frn.dialog("manGenViewXml","xmlData");				var stringFinal;				for(var i=0,n=nXml(just);i<n;i++){					var ren=getXml(just,"r"&i);					if(i)stringFinal=stringFinal & "\#013";					stringFinal=stringFinal & ren;				}				frn.set("justificado",stringFinal);			}			fun divideString(stringIn,nChars){//Funcion que divide un string en n elementos xml, dividiendo por palabras completas hasta el número de caracteres máximo especificado.				//stringIn=string de entrada				//nChars=Caracteres máximos por renglón a imprimir				var strTemp="";  //String Temporal.				var xmlRet;//Estructura xml donde devolvera los renglones divididos				var partesEnter=strSplit(stringIn,"\#013");				for(var i=0,n=nXml(partesEnter);i<n;i++){					var renglon=trim(getXml(partesEnter,"r"&i));					if((mid(renglon,0,1)&="\#013")||(mid(renglon,0,1)&="\#010"))renglon=mid(renglon,1);					var partes=strSplit(renglon," ");					for(var i2=0,n2=nXml(partes);i2<n2;i2++){						var palabra=getXml(partes,"r"&i2);						if((strlen(strTemp)+strlen(palabra))>nChars){//Ya no cabe esta palabra, genera nuevo renglon							setXml(xmlRet,"r"&nXml(xmlRet),strTemp);							strTemp="";						}						if(strTemp &! "")strTemp=strTemp & " ";						strTemp=strTemp & palabra;					}					if(strlen(strTemp)>0){						setXml(xmlRet,"r"&nXml(xmlRet),strTemp);						strTemp="";					}				}				if(strlen(strTemp)>0){					setXml(xmlRet,"r"&nXml(xmlRet),strTemp);					strTemp="";				}				return xmlRet;			}		}	</script></pag>